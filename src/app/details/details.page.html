<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalhes do Filme</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="gradient-overlay"></div>

  <div class="movie-details-container">
    @if (loading) {
      <div class="loading-container">
        <ion-spinner></ion-spinner>
        <p>Carregando detalhes...</p>
      </div>
    } @else if (movie) {
      <!-- Header com poster e informações principais -->
      <div class="movie-header">
        <div class="poster-container">
          <img 
            [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path" 
            [alt]="movie.title"
            class="movie-poster"
            (error)="movie.poster_path = '/assets/icon/favicon.png'"
          />
        </div>
        
        <div class="movie-info">
          <h1 class="movie-title">{{ movie.title }}</h1>
          <p class="movie-subtitle">
            {{ movie.release_date | date:'yyyy' }} • {{ movie.runtime }} minutos
          </p>
          
          <div class="rating-section">
            <div class="stars-large">
              {{ movie.vote_average | stars }}
            </div>
            <div class="rating-text">
              {{ movie.vote_average | number:'1.1-1' }}/10 ({{ movie.vote_count }} votos)
            </div>
          </div>
        </div>
      </div>

      <!-- Sinopse -->
      @if (movie.overview) {
        <div class="overview-section">
          <h2 class="section-title">Sinopse</h2>
          <p class="overview-text">{{ movie.overview }}</p>
        </div>
      }

      <!-- Estatísticas do filme -->
      <div class="movie-stats">
        <div class="stat-card" appHighlight>
          <h3 class="section-title">Orçamento</h3>
          <p class="stat-value">{{ movie.budget | currencyUsd }}</p>
        </div>

        <div class="stat-card" appHighlight="var(--ion-color-success-tint)">
          <h3 class="section-title">Receita</h3>
          <p class="stat-value">{{ movie.revenue | currencyUsd }}</p>
        </div>

        <div class="stat-card">
          <h3 class="section-title">Duração</h3>
          <p class="stat-value">{{ movie.runtime }} minutos</p>
        </div>

        <div class="stat-card">
          <h3 class="section-title">Data de Lançamento</h3>
          <p class="stat-value">{{ movie.release_date | date:'dd/MM/yyyy' }}</p>
        </div>
      </div>

      <!-- Gêneros -->
      @if (movie.genres && movie.genres.length > 0) {
        <div class="genres-section">
          <h2 class="section-title">Gêneros</h2>
          <div class="genres-container">
            @for (genre of movie.genres; track genre.id) {
              <span class="genre-tag">{{ genre.name }}</span>
            }
          </div>
        </div>
      }
    } @else {
      <div class="error-container">
        <p>Filme não encontrado</p>
      </div>
    }
  </div>
</ion-content>